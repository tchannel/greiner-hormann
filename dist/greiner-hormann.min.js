!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.greinerHormann=e()}}(function(){return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t){var r=e("./lib/intersect"),n=e("./lib/union"),o=e("./lib/util");t.exports={union:n,intersect:r,utils:o}},{"./lib/intersect":3,"./lib/union":6,"./lib/util":7}],2:[function(e,t){function r(e,t,r,n,o){{var i=e.count();t.count()}if(0===e.count("intersect",!0))switch(o){case"union":return[[r],[n]];case"intersect":return[];case"subtractB":return"in"==t.first.type?[[r,n]]:[[r]];case"subtractA":return"in"==e.first.type?[[n,r]]:[[n]]}if(i==e.count("degenerate",!0))switch(o){case"subtractA":case"subtractB":return[];default:return[[r]]}}function n(e,t,r){for(var n=e.first,o=[],i=!1,s="next",a="prev";n=e.firstIntersect();){var u=[[n.x,n.y]];do{if(i?(s=r?"next":"prev",a=r?"prev":"next"):(s=t?"next":"prev",a=t?"prev":"next"),n.checked=!0,n.neighbor&&(n.neighbor.checked=!0),n.entry){do n=n[s],u.push([n.x,n.y]);while(!n.intersect)}else do n=n[a],u.push([n.x,n.y]);while(!n.intersect);n=n.neighbor,i=!i}while(!n.checked);o.push([u])}return o}function o(e,t,r,n){var o=e.first;do{a(o,n);var i=t.first;if(!o.intersect)do{if(a(i,r),!i.intersect){var u=e.nextNonIntersect(o.next),l=t.nextNonIntersect(i.next),h=c(o,u,i,l);h&&(i=s(e,t,o,u,i,l,h))}i=i.next}while(i!==t.first);o=o.next}while(o!==e.first)}function i(e){var t=e.first;do t.degenerate&&(t.intersect=!0,t.neighbor.intersect=!0),t=t.next;while(t!=e.first)}function s(e,t,r,n,o,i,s){var a,u,l=0<s.alphaA&&s.alphaA<1,c=0<s.alphaB&&s.alphaB<1;return l&&c?(a=new g(s.x,s.y,s.alphaA,!0),u=new g(s.x,s.y,s.alphaB,!0),e.insert(a,r,n),t.insert(u,o,i)):(l?(a=new g(s.x,s.y,s.alphaA,!0,!0),e.insert(a,r,e.nextNonIntersect(r.next))):0==s.alphaA?(r.intersect=!0,r.degenerate=!0,r.alpha=s.alphaA,a=r):1==s.alphaA&&(n.intersect=!1,n.degenerate=!0,n.alpha=s.alphaA,a=n),c?(u=new g(s.x,s.y,s.alphaB,!0,!0),t.insert(u,o,t.nextNonIntersect(o.next))):0==s.alphaB?(o.intersect=!0,o.degenerate=!0,o.alpha=s.alphaB,u=o):1==s.alphaB&&(i.intersect=!1,i.degenerate=!0,i.alpha=s.alphaB,u=i,o.next!=t.first&&(o=o.next))),a&&u&&(a.neighbor=u,u.neighbor=a,a.type="on",u.type="on"),o}function a(e,t){e.type||(e.type=h(f([e.x,e.y]),t)?"in":"out")}function u(e){var t=e.first,r=t;do{if(r.intersect&&r.neighbor)switch(l(r),l(r.neighbor),r.entryPair()){case"en/en":r.remove=!0,r.type="in",r.intersect=!1,r.neighbor.intersect=!1;break;case"ex/ex":r.remove=!0,r.type="out",r.intersect=!1,r.neighbor.intersect=!1}r=r.next}while(r!=t)}function l(e){var t=e.pairing();switch(t){case"in/out":case"on/out":case"in/on":e.entry=!1;break;case"out/in":case"on/in":case"out/on":e.entry=!0;break;case"out/out":case"in/in":case"on/on":var r=e.neighbor.pairing();"out/out"==r||"in/in"==r||"on/on"==r||"on/on"==t&&"on/out"==r?(e.remove=!0,e.neighbor.remove=!0,e.neighbor.intersect=!1,e.intersect=!1):(l(e.neighbor),e.entry=!e.neighbor.entry);break;default:console.error("UNKNOWN TYPE",e.pairing())}}function c(e,t,r,n){var o,i,s,a,u,l={x:null,y:null,onLine1:!1,onLine2:!1,alphaA:null,alphaB:null};return o=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y),0==o?e.equals(r)?(l.x=e.x,l.y=e.y,l.alphaA=0,l.alphaB=0,l):!1:(i=e.y-r.y,s=e.x-r.x,a=(n.x-r.x)*i-(n.y-r.y)*s,u=(t.x-e.x)*i-(t.y-e.y)*s,i=a/o,s=u/o,l.x=e.x+i*(t.x-e.x),l.y=e.y+i*(t.y-e.y),l.alphaA=i,l.alphaB=s,l.alphaA>.99999999999999&&(l.alphaA=1),l.alphaB>.99999999999999&&(l.alphaB=1),l.alphaA<1e-14&&(l.alphaA=0),l.alphaB<1e-14&&(l.alphaB=0),i>=0&&1>=i&&(l.onLine1=!0),s>=0&&1>=s&&(l.onLine2=!0),l.onLine1&&l.onLine2?l:!1)}var h=e("turf-inside"),f=e("turf-point"),p=e("turf-polygon"),y=e("./ring"),g=e("./vertex"),v=e("turf-is-clockwise");t.exports=function(e,t,s,a){var l;v(e)||e.reverse(),v(t)||t.reverse();try{var c=p([e]),h=p([t])}catch(f){console.log("Clipping error: bad polygons!"),console.log(e),console.log("-------------------"),console.log(t)}s=!!s,a=!!a,s||a?s&&a?l="intersect":!s&&a?l="subtractB":s&&!a&&(l="subtractA"):l="union";{var g=y.fromArray(e),x=y.fromArray(t);o(g,x,c,h)}i(g);var d;return(d=r(g,x,e,t,l))?d:(u(g),n(g,s,a))}},{"./ring":4,"./vertex":8,"turf-inside":9,"turf-is-clockwise":10,"turf-point":11,"turf-polygon":12}],3:[function(e,t){var r=e("./greiner-hormann"),n=(e("turf-inside"),e("turf-point"),e("turf-polygon"),e("./union")),o=e("./util"),i=e("./subtract");t.exports=function(e,t){for(var e=o.clone(e),t=o.clone(t),s=o.outerHulls(e).concat(o.outerHulls(t)),a=o.holes(e).concat(o.holes(t)),u=[],l=0;l<s.length;l++)for(var c=l+1;c<s.length;c++){var h=r(s[l],s[c],!0,!0);Array.isArray(h)&&(u=u.concat(h))}if(a.length>0){var f=n(a);return i(u,o.outerHulls(f))}return u}},{"./greiner-hormann":2,"./subtract":5,"./union":6,"./util":7,"turf-inside":9,"turf-point":11,"turf-polygon":12}],4:[function(e,t){function r(){this.first=null}Vertex=e("./vertex"),r.prototype.count=function(e,t){for(var r=this.first,n=0;;)if(e?r[e]===t&&n++:n++,r=r.next,r==this.first)break;return n},r.fromArray=function(e){for(var t=new r,n=0;n<e.length-1;n++){var o=e[n];t.push(new Vertex(o[0],o[1]))}return t},r.prototype.push=function(e){this.first?(next=this.first,prev=next.prev,next.prev=e,e.next=next,e.prev=prev,prev.next=e):(this.first=e,this.first.prev=e,this.first.next=e)},r.prototype.insert=function(e,t,r){for(var n=t.next;n!=r&&n.alpha<e.alpha;)n=n.next;e.next=n,prev=n.prev,e.prev=prev,prev.next=e,n.prev=e},r.prototype.nextNonIntersect=function(e){for(var t=e;t.intersect&&t!=this.first;)t=t.next;return t},r.prototype.firstIntersect=function(){for(var e=this.first;;){if(e.intersect&&!e.checked)return e;if(e=e.next,e==this.first)break}return!1},r.prototype.toArray=function(){var e=this.first,t=[];do t.push([e.x,e.y]),e=e.next;while(e!=this.first);return t},t.exports=r},{"./vertex":8}],5:[function(e,t){var r=e("./util"),n=e("./greiner-hormann");t.exports=function(e,t){e=r.clone(e),t=r.clone(t);for(var o=0;o<t.length;o++){for(var i=e.length,s=0;s<e.length;s++){var a=n(e[s][0],t[o],!1,!0);e[s][0]=a[0][0];for(var u=1;u<a[0].length;u++)e[s].push(a[0][u]);for(var u=1;u<a.length;u++)e.push(a[u])}i!=e.length&&(t.splice(o,1),o--)}return e}},{"./greiner-hormann":2,"./util":7}],6:[function(e,t){function r(e){for(var t=0;t<e.length;t++)for(var r=t+1;r<e.length;r++)if(t!=r){var i=o.outerHulls(n(e[t],e[r],!1,!1));1==i.length&&(e[t]=i[0],e.splice(r,1),r=t)}return e}var n=e("./greiner-hormann"),o=e("./util"),i=e("./subtract");t.exports=function(e,t){"undefined"!=typeof t&&null!=t&&(o.isMultiPolygon(e)||(e=[e]),o.isMultiPolygon(t)||(t=[t]),e=e.concat(t)),e=o.clone(e);var n=o.outerHulls(e),s=o.holes(e);return n=o.wrapToPolygons(r(n)),s.length>0?(s=r(s),i(n,s)):n}},{"./greiner-hormann":2,"./subtract":5,"./util":7}],7:[function(e,t,r){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),r.clone=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Array.isArray(e[n])?r.clone(e[n]).slice():e[n]);return t},r.wrapToPolygons=function(e){for(var t=[],n=0;n<e.length;n++)r.isRing(e[n])?t.push([e[n]]):r.isMultiPolygon(e[n])?t.concat(e[n]):r.isPolygon(e[n])&&t.push(e[n]);return t},r.unwrap=function(e){for(var t=[],r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)t.push(e[r][n])},r.depth=function(e){function t(e,r){return Array.isArray(e)?t(e[0],r+1):r}return t(e,0)},r.isMultiPolygon=function(e){return 4==r.depth(e)?!0:!1},r.isPolygon=function(e){return 3==r.depth(e)?!0:!1},r.isRing=function(e){return 2==r.depth(e)?!0:!1},r.outerHulls=function(e){var t=[];if(r.isPolygon(e))return[e[0]];for(var n=0;n<e.length;n++)if(r.isMultiPolygon(e[n]))for(var o=0;o<e[n].length;o++)t.push(e[n][o][0]);else r.isPolygon(e[n])?t.push(e[n][0]):r.isRing(e[n])&&t.push(e[n]);return t},r.holes=function(e){var t=[];if(r.isPolygon(e))return e.slice(1);for(var n=0;n<e.length;n++)if(r.isMultiPolygon(e[n]))for(var o=0;o<e[n].length;o++)for(var i=1;i<e[n][o].length;i++)t.push(e[n][o][i]);else if(r.isPolygon(e[n]))for(var o=1;o<e[n].length;o++)t.push(e[n][o]);return t}},{}],8:[function(e,t){function r(e,t,r,n,o){this.x=e,this.y=t,this.alpha=r||0,this.intersect=n||!1,this.entry=!0,this.checked=!1,this.degenerate=o||!1,this.neighbor=null,this.next=null,this.prev=null,this.type=null,this.remove=!1}r.prototype.pairing=function(){return this.prev.type+"/"+this.next.type},r.prototype.entryPair=function(){var e=this.entry?"en":"ex",t=this.neighbor.entry?"en":"ex";return e+"/"+t},r.prototype.equals=function(e){return this.x==e.x&&this.y==e.y?!0:!1},r.prototype.log=function(){console.log("INTERSECT: "+(this.intersect?"Yes":"No ")+" ENTRY: "+(this.entry?"Yes":"No ")+" DEGEN: "+(this.degenerate?"Yes":"No ")+" TYPE: "+String(this.prev.type+" ").slice(0,3)+" / "+String(this.type+" ").slice(0,3)+" / "+String(this.next.type+" ").slice(0,3)+" ALPHA: "+this.alpha.toPrecision(3)+" REMOVE: "+(this.remove?"Yes":"No")+" "+this.x+", "+this.y)},t.exports=r},{}],9:[function(e,t){function r(e,t){for(var r=!1,n=0,o=t.length-1;n<t.length;o=n++){var i=t[n][0],s=t[n][1],a=t[o][0],u=t[o][1],l=s>e[1]!=u>e[1]&&e[0]<(a-i)*(e[1]-s)/(u-s)+i;l&&(r=!r)}return r}t.exports=function(e,t){var n=t.geometry.coordinates,o=[e.geometry.coordinates[0],e.geometry.coordinates[1]];"Polygon"===t.geometry.type&&(n=[n]);for(var i=!1,s=0;s<n.length&&!i;){if(r(o,n[s][0])){for(var a=!1,u=1;u<n[s].length&&!a;)r(o,n[s][u])&&(a=!0),u++;a||(i=!0)}s++}return i}},{}],10:[function(e,t){t.exports=function(e){for(var t,r,n=0,o=1,i=e.length;i>o;)t=r||e[0],r=e[o],n+=(r[0]-t[0])*(r[1]+t[1]),o++;return n>0}},{}],11:[function(e,t){var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e,t){if(!r(e))throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:t||{}}}},{}],12:[function(e,t){t.exports=function(e,t){if(null===e)throw new Error("No coordinates passed");for(var r=0;r<e.length;r++)for(var n=e[r],o=0;o<n[n.length-1].length;o++){if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(n[n.length-1][o]!==n[0][o])throw new Error("First and last Position are not equivalent.")}var i={type:"Feature",geometry:{type:"Polygon",coordinates:e},properties:t};return i.properties||(i.properties={}),i}},{}]},{},[1])(1)});